{% extends "base.html" %}

{% block content %}
    <h2>Ajouter des produits</h2>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert alert-success">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <form method="POST" class="form-produit">
        <table id="produits-table" class="table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Description</th>
                    <th>Prix</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" name="nom_1" required class="form-control"></td>
                    <td><input type="text" name="description_1" class="form-control"></td>
                    <td><input type="number" name="prix_1" step="0.01" required class="form-control"></td>
                </tr>
            </tbody>
        </table>

        <button type="button" class="btn btn-primary" onclick="ajouterLigne()">Ajouter une ligne</button>
        <button type="submit" class="btn btn-success">Enregistrer</button>
    </form>

    <script>
        let compteur = 2;

        function ajouterLigne() {
            const tbody = document.querySelector('#produits-table tbody');
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="text" name="nom_${compteur}" required class="form-control"></td>
                <td><input type="text" name="description_${compteur}" class="form-control"></td>
                <td><input type="number" name="prix_${compteur}" step="0.01" required class="form-control"></td>
            `;
            tbody.appendChild(tr);
            compteur++;
        }
    </script>
{% endblock %}


